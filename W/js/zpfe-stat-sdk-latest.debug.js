/*!
* @zpfe/stat-sdk@1.0.8
* (c) 2018-2021 zhaopin.com
*/
!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var o=!0;var a={getCookies:function(){var t={};try{for(var e=document.cookie?document.cookie.split("; "):[],r=0;r<e.length;r++){var n=e[r].split("=");t[n[0]]=decodeURIComponent(n[1])}return t}catch(e){return console.error("获取 cookies 失败",e),window.zpStat&&window.zpStat.error&&window.zpStat.error(e,"获取 cookies 失败"),t}},getCurrentUrlPath:function(e){var t="";return t="string"==typeof e?e.replace(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,"$3/$5"):t},copyMembers:function(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},addEventListener:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on".concat(t),r)},removeEventListener:function(e,t,r){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent("on".concat(t),r)}},r=a.getCurrentUrlPath,i=[".zhaopin.com",".zhaopin.cn",".highpin.cn",".zpexam.com"];var n={get:function(e){return 2===(e="; ".concat(document.cookie).split("; ".concat(e,"="))).length?e.pop().split(";").shift():null},set:function(e,t,r){for(var n=null,o=0;o<i.length;o++)RegExp("".concat(i[o],"$")).test(window.location.hostname)&&(n=i[o]);n||console.warn("当前域名不在白名单内，白名单列表：".concat(i.join(", ")));var a=new Date;a.setTime(a.getTime()+24*r*60*60*1e3),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(a.toUTCString(),"; domain=").concat(n,"; path=/")}},c={generate:function(){var r=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(r+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return("x"===e?t:7&t|8).toString(16)})}};var s={get:function(){var e,t="";try{(e=n.get("x-zp-client-id"))||(e=c.generate(),n.set("x-zp-client-id",e,36500)),t=e}catch(e){console.error(e.message)}return t}};var p,u={get:function(){var e={},t=window.zpPageRequestId;return t&&(e["x-zp-page-request-id"]=t),(t=s.get())&&(e["x-zp-client-id"]=t),e}};var e={get:function(){var e=window.zpStatConfig||{},t={};a.copyMembers(t,e.page||{}),e.isSPA&&(t.isSPA=!0);var r,n=u.get();for(r in n)n.hasOwnProperty(r)&&(t[r.replace(/-/g,"_")]=n[r]);return t.current_url=document.location.href,t.current_url_path=a.getCurrentUrlPath(document.location.href),t.referrer=t.isSPA&&p?p.current_url:document.referrer,(e=a.getCookies()).at&&e.rt&&(t.passport_at=e.at,t.passport_rt=e.rt),p=t}};var t={get:function(){var e=window.zpStatConfig&&(window.zpStatConfig.sa||{}),t={};return a.copyMembers(t,e),t}},d=e.get(),l="sa";function w(e){try{var t=e.getAttribute("zp-stat-id");if(!t)return{};for(var r={stat_id:t},n=e.attributes,o=0;o<n.length;o++){var a=n[o].name;"zp-stat-id"!==a&&(a.indexOf("zp-stat-")||(r[a=a.substr(8).replace(/-/g,"_")]=n[o].value))}return r.track&&window.zpStat&&window.zpStat.track&&window.zpStat.track(r.track,r),r}catch(e){return window.zpStat&&window.zpStat.error&&window.zpStat.error(e.message,"提取自定义上报信息失败"),{}}}function f(e){return window.sa&&window.sa[e]}!function(e){try{var t=e.sdk_url,r=e.name,n=window,o=document,a=null,i=null;n.sensorsDataAnalytic201505=r,n[r]=n[r]||function(e){return function(){(n[r]._q=n[r]._q||[]).push([e,arguments])}};for(var c=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","getAppStatus"],s=0;s<c.length;s++)n[r][c[s]]=n[r].call(null,c[s]);n[r]._t||(a=o.createElement("script"),i=o.getElementsByTagName("script")[0],a.async=1,a.src=t,a.setAttribute("charset","UTF-8"),i.parentNode.insertBefore(a,i),n[r].para=e)}catch(e){console.error("神策SDK默认初始化错误",e)}}(function(){var e=function(){var e={A14:"zlclient",A17:"zlclient",A18:"zlclient",A19:"zlclient",A20:"zlbusiness",A1:"zlbusiness",A:"zlclient",B:"highpin",E1:"zlcrm",E:"itoa",F:"production",G14:"zlclient",G:"production",H:"zlclient",J:"zlbschool",K:"hremail",L:"talentdev",S31:"zlclient"},t=d.appid;if(o||!t)return"default";var r=t.substr(0,2),n=t.substr(0,1);return e[t]||e[r]||e[n]||"default"}(),e={sdk_url:"https://statistic.zhaopin.cn/sdk/sa/1.18.20/sa.min.js",heatmap_url:"https://statistic.zhaopin.cn/sdk/sa/1.18.20/heap_map.min.js",name:l,show_log:!!o,web_url:"https://dsm.zhaopin.cn/?project=".concat(e),server_url:"https://ds.zhaopin.cn/sa?project=".concat(e),heatmap:{custom_property:w}};a.copyMembers(e,t.get());try{void 0!==window.localStorage&&void 0!==window.localStorage.zpfe_stat_sa_show_log&&(e.show_log="true"===window.localStorage.getItem("zpfe_stat_sa_show_log"))}catch(e){}return e}()),window[l].registerPage&&window[l].registerPage(d),!0!==d.isSPA&&window[l].quick&&window[l].quick("autoTrack"),window.zpStat={track:function(e,t,r){f("track")&&window.sa.track(e,t,r)},login:function(e){f("login")&&window.sa.login(e)},logout:function(e){f("logout")&&window.sa.logout(e)},setProfile:function(e,t){f("setProfile")&&window.sa.setProfile(e,t)},error:function(e,t){e&&(console.error(t,e),f("track")&&window.sa.track("zp_ui_error",{zp_ui_error_message:e.message,zp_ui_error_stack:e.stack,zp_ui_error_description:t,current_url_path:r(document.location.href)}))},refreshPageConfig:function(){f("track")&&window.sa.registerPage(e.get())},switchPage:function(){var e=this;f("quick")&&setTimeout(function(){e.refreshPageConfig(),window.sa.quick("autoTrackSinglePage")},100)}},a.addEventListener(window,"error",function(e){var t;(t=e).error&&t.error.stack&&~t.error.stack.indexOf(".zhaopin.c")&&(window.zpStat&&window.zpStat.error?window.zpStat.error(e.error,"发现未捕获的错误"):console.error("发现未捕获的错误",e.error))});var g,m,_=3e4;function z(e,t){e=Math.abs(parseInt(t-e));return e=_<e?0:e}function h(e){return decodeURIComponent(window.location.search.replace(RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(e).replace(/[.+*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))}a.addEventListener(window,"load",function(){var e=function(){if(!window.performance||!window.performance.timing)return null;var e=window.performance.timing,t=z(e.redirectStart,e.redirectEnd),r=z(e.domainLookupStart,e.domainLookupEnd),n=z(e.connectStart,e.connectEnd),o=z(e.requestStart,e.responseStart),a=z(e.responseStart,e.responseEnd),i=z(e.domLoading,e.domInteractive),c=z(e.domInteractive,e.domComplete),e=z(e.navigationStart,e.domComplete);return{zp_performance_redirect:t,zp_performance_domain_lookup:r,zp_performance_tcp:n,zp_performance_request:o,zp_performance_response:a,zp_performance_dom_content_load:i,zp_performance_dom_processing:c,zp_performance_dom_complete:e}}();e&&window.zpStat.track("zp_ui_performance",e)}),g=h("chuda_user_id"),m=h("exp_id"),g&&(window.zpStat.login(g),window.zpStat.track("chuda_pageopen",{exp_id:m}))});
